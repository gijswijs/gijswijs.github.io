<!DOCTYPE html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=description content=""><link rel="shortcut icon" href=/favicon.ico><link rel=apple-touch-icon sizes=57x57 href=/apple-icon-57x57.png><link rel=apple-touch-icon sizes=60x60 href=/apple-icon-60x60.png><link rel=apple-touch-icon sizes=72x72 href=/apple-icon-72x72.png><link rel=apple-touch-icon sizes=76x76 href=/apple-icon-76x76.png><link rel=apple-touch-icon sizes=114x114 href=/apple-icon-114x114.png><link rel=apple-touch-icon sizes=120x120 href=/apple-icon-120x120.png><link rel=apple-touch-icon sizes=144x144 href=/apple-icon-144x144.png><link rel=apple-touch-icon sizes=152x152 href=/apple-icon-152x152.png><link rel=apple-touch-icon sizes=180x180 href=/apple-icon-180x180.png><link rel=icon type=image/png sizes=192x192 href=/android-icon-192x192.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=96x96 href=/favicon-96x96.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/manifest.json><meta name=msapplication-TileColor content=#ffffff><meta name=msapplication-TileImage content=/ms-icon-144x144.png><meta name=theme-color content=#ffffff><title>Measuring your writing progress with a git word count</title><link href=/styles/main.css rel=stylesheet><link rel=alternate type=application/rss+xml title="Gijs van Dam" href=/rss.xml><link rel=webmention href=https://webmention.io/www.gijsvandam.nl/webmention><link rel=pingback href=https://webmention.io/www.gijsvandam.nl/xmlrpc><link rel=authorization_endpoint href=https://janos-githubproxy.azurewebsites.net/api/authorize/gijswijs/gijswijs.github.io><link rel=token_endpoint href=https://janos-githubproxy.azurewebsites.net/api/token/gijswijs/gijswijs.github.io><link rel=microsub href=https://aperture.p3k.io/microsub/636><link rel=micropub href=https://janos-githubproxy.azurewebsites.net/api/micropub/gijswijs/gijswijs.github.io></head><body class="article h-entry"><header>Gijs van Dam<nav><ul><li><a href=/ title=Home>Home</a></li><li><a href=/research title=Research>Research</a></li><li><a href=/open-source title="Open Source">Open Source</a></li><li><a href=/ventures title=Ventures>Ventures</a></li><li><a href=/resume title=Resume>Resume</a></li><li><a href=/about title=About>About</a></li><li><a href=/now title=Now>Now</a></li><li><a href=/contact title=Contact>Contact</a></li></ul></nav></header><main><article><header><h1 class=p-name>Measuring your writing progress with a git word count</h1><span><a class=u-url href=/post/measuring-your-writing-progress-with-a-git-word-count><time class=dt-published datetime=2021-02-26T00:00:00Z>February 26, 2021</time></a> <span class=reading-time>5 minute read</span></span><ul><li><a class=p-category href=/topics/boilerplate-paper/ >boilerplate paper</a></li><li><a class=p-category href=/topics/powershell/ >powershell</a></li><li><a class=p-category href=/topics/git/ >git</a></li></ul></header><section class=e-content><p>Writing a scientific paper is hard. Doing your PhD is hard. Writing your thesis is hard. And to make me feel even more miserable I decided to measure my progress by counting the nett change in words I achieve throughout each day. I am by no means a productivity guru and I don&#39;t know whether word count is a useful indicator for measuring the progress of a paper. That being said, it is a reality check to see how fast my work is progressing. So without further ado here&#39;s the Powershell command that outputs the wordcount for the last 25 days based on git commits.</p><pre><code class=language-powershell>for($i = 0; $i -lt 25; $i++){$j = $i + 1; Write-Host (get-date (get-date).addDays(-$i) -UFormat &quot;%Y%m%d&quot;) ((git diff --word-diff=porcelain &quot;@{$j days ago}&quot; &quot;@{$i days ago}&quot;   -- &quot;***.md&quot;| Select-String -Pattern &quot;^\+.*&quot; | Measure-Object -word | select -ExpandProperty Words) - (git diff --word-diff=porcelain &quot;@{$j days ago}&quot; &quot;@{$i days ago}&quot;  -- &quot;***.md&quot;| Select-String -Pattern &quot;^-.*&quot; | Measure-Object -word | select -ExpandProperty Words)) }</code></pre><h2 id=what-does-it-do>What does it do?</h2><p>At the core of this script is the following git command:</p><pre><code>git diff --word-diff=porcelain &quot;@{$j days ago}&quot; &quot;@{$i days ago}&quot;   -- &quot;***.md&quot;</code></pre><p>This command uses <code>git diff</code> (duh!) with the <code>--word-diff</code> option which marks the actual word being changed instead of the entire line that contains it. The latter is the default behavior of <code>git diff</code> and is not what we want when performing a word count. <code>porcelain</code> denotes the special line-based format for <code>word-diff</code> meant for script consumption, which is what we will do next. <code>-- &quot;***.md&quot;</code> only considers markdown files which are the files that contain all the content of my paper in <a href=https://github.com/neumannjs/boilerplate-paper>Boilerplate Paper</a>. It is important to note that if you don&#39;t commit regularly (at least daily) this word count doesn&#39;t come up with accurate data.</p><p>If you run only this command, you would get something like this.</p><pre><code>~
diff --git a/e-diff-paper/paper/03_method.md b/e-diff-paper/paper/03_method.md
index a3b4dfe..c4a565c 100644
--- a/e-diff-paper/paper/03_method.md
+++ b/e-diff-paper/paper/03_method.md
@@ -1,8 +1,8 @@
 # Method
~

~
 Our goal is to obtain differential privacy for the balance of a Lightning Network payment channel. This goal differs from the original setting of differential privacy. Originally differential privacy
-was
  meant to ensure that adding or deleting a record
-from
+in
  a database did not change the answer to statistical differential private queries significantly. To achieve that, noise is added to the query answer. By observing this noisy answer 
-a passive
+an
  observer is unable to discern if a specific record is in the database or not, regardless of the information this observer possesses about the other records in the database. This adding of noise is done through a probabilistic algorithm applied to the data set contained in the database.
~

~
 Our case is different in a consequential way. A passive observer can use a BDA again and again to get a reading on the balance. The information that this observer obtains is comparable to a stream of data. To cater to our situation we expand the basic definition of (approximate) differential privacy to 
-streams
+streams,
  similarly to [@Chan2011].</code></pre><p>Those lines starting with <code>-</code> or <code>+</code> are the ones we are interested in, because those are the words that have been deleted and added. We pipe the results of that command into <code>Select-String</code> which is kind of like grep for Powershell.</p><pre><code>Select-String -Pattern &quot;^\+(?!\+\+\s).*&quot;</code></pre><p>The regex pattern matches with all lines starting with <code>+</code> except if it is followed by <code>++</code> (we use the negative lookahead to check for that) because the three plus-signs are use to indicate file names that have additions, not the addition itself. If you run the above two commands piped together you would get a result like this:</p><pre><code>+#
+## Just-In-Time Routing
+Just-in-time routing or JIT routing [@Pickhardt2019] was proposed as a solution to mitigate routing failures due to insufficient funds. LN uses source based routing, where the send 
er of the payment has to guess the route over which to send a payment. Since a node is only aware of the balances of channels that it is part of, a sender node can only guess if a r
oute with other channels has enough liquidity to process the payment. This can lead to relatively large amounts of failed payments due to insufficient funds somewhere along the rout 
e.
+JIT Routing tries to make the routing process more like best effort routing known in IP-forwarding. The concept depends on nodes quickly rebalancing their channels upon receiving a
 routing request (HTLC) for which they have insufficient funds. Because a node along the route has more knowledge of its local neighborhood than the sender node, it can use that kno
wledge to perform a small transaction within its local neighborhood of channels to rebalance funds in such a way that original routing request can proceed. Given that the rebalancin 
g succeeds within the timeframe of the routing request, the requests now succeeds where it would have failed without JIT routing.
+in
+an
+streams,</code></pre><p>Although there is some Markdown markup that shouldn&#39;t be counted as words (like <code>#</code> and <code>##</code>) this is good enough for my purposes. So we pipe the results into our next two commands.</p><pre><code>Measure-Object -word | select -ExpandProperty Words</code></pre><p>These are plain and simple, the first command performs the actual word count, but since Powershell always returns an object, we need the latter command to enumerate the values of the object and select the value. Everything piped together returns just a number.</p><pre><code>248</code></pre><p>Now we do the same thing for the deleted words. We run the same commands but now with a different regex expression: <code>Select-String -Pattern &quot;^\-(?!\-\-\s).*&quot;</code></p><p>We substract the deleted words from the added words and we have our nett change in words for the day. All that is left to do is to wrap everything in a loop that goes back as much days as you want (25 in the above script) and outputs the date with the word count for that date.</p><p>So this is my progress for the past few days of a particular paper I am writing:</p><pre><code>20210226 237
20210225 0
20210224 0
20210223 0
20210222 0
20210221 0
20210220 0
20210219 0
20210218 591
20210217 190
20210216 332
20210215 0
20210214 0
20210213 0
20210212 0
20210211 925
20210210 0
20210209 382</code></pre><p>I guess I was just busy with other things...</p></section></article></main><footer><nav><ul><li><a href=/ title=Home>Home</a></li><li><a href=/research title=Research>Research</a></li><li><a href=/open-source title="Open Source">Open Source</a></li><li><a href=/ventures title=Ventures>Ventures</a></li><li><a href=/resume title=Resume>Resume</a></li><li><a href=/about title=About>About</a></li><li><a href=/now title=Now>Now</a></li><li><a href=/contact title=Contact>Contact</a></li></ul></nav><ul><li><div itemscope itemtype=https://schema.org/Person><a itemprop=sameAs content=https://www.github.com/gijswijs href=https://www.github.com/gijswijs rel="noreferrer noopener me" target=_blank title=Github>Github</a></div></li><li><div itemscope itemtype=https://schema.org/Person><a itemprop=sameAs content=https://www.linkedin.com/in/gijsvandam/ href=https://www.linkedin.com/in/gijsvandam/ rel="noreferrer noopener me" target=_blank title=LinkedIn>LinkedIn</a></div></li><li><div itemscope itemtype=https://schema.org/Person><a itemprop=sameAs content=https://www.researchgate.net/profile/Gijs_Van_Dam2 href=https://www.researchgate.net/profile/Gijs_Van_Dam2 rel="noreferrer noopener me" target=_blank title=ResearchGate>ResearchGate</a></div></li><li><div itemscope itemtype=https://schema.org/Person><a itemprop=sameAs content=https://bitcoinhackers.org/@gijswijs href=https://bitcoinhackers.org/@gijswijs rel="noreferrer noopener me" target=_blank title=Mastodon>Mastodon</a></div></li><li><div itemscope itemtype=https://schema.org/Person><a itemprop=sameAs content=https://www.twitter.com/gijswijs href=https://www.twitter.com/gijswijs rel="noreferrer noopener me" target=_blank title=Twitter>Twitter</a></div></li><li><a href=/feed rel=feed target=_blank title=Stream>Stream</a></li><li><a href=/rss.xml rel="" target=_blank title=RSS>RSS</a></li><li><div itemscope itemtype=https://schema.org/Person><a itemprop=sameAs content=https://keybase.io/gijsvandam href=https://keybase.io/gijsvandam rel="noreferrer noopener me" target=_blank title=Keybase>Keybase</a></div></li><li><div itemscope itemtype=https://schema.org/Person><a itemprop=sameAs content=https://orcid.org/0000-0002-6188-6859 href=https://orcid.org/0000-0002-6188-6859 rel="noreferrer noopener me" target=_blank title=ORCID>ORCID</a></div></li><li><div itemscope itemtype=https://schema.org/Person><a itemprop=sameAs content="https://scholar.google.com/citations?user=4dTcK4kAAAAJ&amp;hl=en" href="https://scholar.google.com/citations?user=4dTcK4kAAAAJ&amp;hl=en" rel="noreferrer noopener me" target=_blank title="Google Scholar">Google Scholar</a></div></li></ul><p>&copy; 2022 <a rel=author class="p-author h-card" href=/ >Gijs van Dam</a>. Published with <a href=https://github.com/neumannjs/Janos>Janos</a>. Theme <a href=https://github.com/neumannjs/Miksa>Miksa</a>.</p></footer></body><script data-goatcounter=https://gijsvandam.goatcounter.com/count async src=//gc.zgo.at/count.js></script></html>